<!DOCTYPE html>
<html>
  <head>
    <script src="http://js.pusher.com/2.1/pusher.min.js" type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

     <script type="text/javascript">
    var pusher = new Pusher("<%= Pusher.key %>");
    var channel = pusher.subscribe('messages');
    channel.bind('message-public', function(message) {
      $('ol#messages').append($('<li>').html(message))
    });
  </script>
  </head>
  <body>

  <form action='/messages' method='POST'>
    <input type="text" name="message">
    <input type="submit" value="chat">
  </form>

  <ol id='messages'></ol>
  </body>
</html>
